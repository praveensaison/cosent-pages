<!DOCTYPE html>
<html>
<head>
    <title>Aadhaar Redirection Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/styles.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="js/scripts.js"></script>
</head>

<body>
<main style="display:flex;flex-direction:column;align-items: center;">
    <div class="center-content align-center" id="loader">
        <div class="loader"></div>
    </div>
   
    <div id="id-error-popup" class="error-popup">
        <div style="display:flex;align-items:center">
        <img class="info-img" src="img/information-button.png" alt="Info Image"/>
        <div style="font-size: 10px;margin-left:5px;font-weight: 500;" id="otpRetryMessage"></div></div></div>

    <div style="background-color: #FFFFFF; padding: 10px 20px;display:flex;justify-content: flex-start;">
       <p style="font-size:16">KYC Verification</p>
    </div>
    <div id="aadhaarSection">
        <div class="input-container">
        <img class="id-img" src="img/ID.png" alt="Id Image"/>
            <input id="aadhaarInput" maxlength="14" oninput="formatAndValidateAadhaarInput(this)"
                   placeholder="Aadhar number" style="border:none;border-bottom:1px solid #707070"
                   type="text" inputmode="numeric">
        </div>
        <p id="aadhaarDescription" style="color: #707070;text-align: center;font-size: 10px;font-style: italic;">Enter the 12-digit Aadhaar number linked to your
            registered mobile number </p>
        <p id="aadhaarErrorMessage" style="color: red;text-align: center;font-size: 10px;display:none">Please enter a valid Aadhaar
            number</p>
    </div>
    <div id="otpSection">
        <div class="otp-container">
            <p style="font-size: 14px;color:#707070;">Enter OTP</p>
            <p style="font-size: 10px;color:#707070;">An OTP is sent to your registered mobile number for verification</p>
            <div class="otp-field">
                <input maxlength="1" type="text" inputmode="numeric"/>
                <input maxlength="1" type="text" inputmode="numeric"/>
                <input class="space" maxlength="1" type="text" inputmode="numeric"/>
                <input maxlength="1" type="text" inputmode="numeric"/>
                <input maxlength="1" type="text" inputmode="numeric"/>
                <input maxlength="1" type="text" inputmode="numeric"/>
            </div>
        </div>

        <p id="otpErrorMessage" style="color: red;  text-align: center;font-size:10px; display:none">Invalid OTP entered</p>
        <p id="resendCounter" style="color:#1D478E;  text-align: center;font-size:10px;display:none"></p>

        <!-- <div class="submit-button2" style="display: flex;justify-content: center">
            <button disabled id="submitButton" onclick="submitOTP()" type="submit">Submit
            </button>
        </div> -->
    </div>
    <div class="submit-section">
        <div id="id-consent-section" class="consent-checkbox" style="display:none">
            <input type="checkbox" id="consentCheckbox" onchange="toggleSubmitButton()">
            <label for="consentCheckbox" style="margin-left:8px">I allow Kisetsu Saison Finance (India) Private Limited to fetch my Aadhaar XML
                details from UIDAI</label>
        </div>
        <div class="submit-button2">
            <button style="display:none" disabled id="generateOtpButton" onclick="generateOtp()" type="submit">Send Otp</button>
        </div>
          <div class="submit-button2">
            <button style="display:none" disabled id="submitButton" onclick="submitOTP()" type="submit">Submit
            </button>
            
        </div>
        
    </div>
    <div style="align-self: center;margin-top:4%">
        <p style="font-size: 10px;color:#707070">
            Powered by Credit Saison
        </p>
    </div>
    
</main>

</body>
</html>


<script>

    const aadhaarInput = document.getElementById("aadhaarInput");

    aadhaarInput.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            generateOtp();
        }
    });

    const inputs = document.querySelectorAll(".otp-field input");
    inputs.forEach((input, index) => {
        input.dataset.index = index;
        input.addEventListener("keyup", handleOtp);
        input.addEventListener("paste", handleOnPasteOtp);
    });

    // Call the toggleSubmitButton function initially to set the initial state of the submit button
    toggleSubmitButton();
    // Add event listener for checkbox change
    const consentCheckbox = document.getElementById("consentCheckbox");
    consentCheckbox.addEventListener("change", handleCheckboxChange);
</script>